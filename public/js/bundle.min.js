(()=>{const e="pk.eyJ1IjoieGVwaGlvcyIsImEiOiJjbDhmYXIzaDAwN3Y1M3FsbDZ2Ymo4bjdxIn0.F9W0VlzFNAJRpmvrNcPsAg",o=o=>{const[t,a]=o.geometry.coordinates;mapboxgl.accessToken=e;const r=new mapboxgl.Map({container:"campgroundMap",style:"mapbox://styles/xephios/cl7cooyh9000614jswc99qbtk",center:[t,a],zoom:10,projection:"globe",scrollZoom:!1});r.addControl(new mapboxgl.NavigationControl);const c=new mapboxgl.Popup({offset:25,className:"mapbox-popup"}).setHTML(`<h5>${o.title}</h5><p>${o.location}</p>`).setMaxWidth("300px");(new mapboxgl.Marker).setLngLat([t,a]).setPopup(c).addTo(r),r.on("style.load",(()=>{r.setFog({})}))},t=o=>{mapboxgl.accessToken=e;const t={features:o},a="campgrounds",r=new mapboxgl.Map({container:"clusterMap",style:"mapbox://styles/xephios/cl7cooyh9000614jswc99qbtk",center:[-95.665,37.6],zoom:4,projection:"globe"});r.addControl(new mapboxgl.NavigationControl),r.on("load",(()=>{r.addSource(a,{type:"geojson",data:t,cluster:!0,clusterMaxZoom:14,clusterRadius:50}),r.addLayer({id:"clusters",type:"circle",source:a,filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#00bcd4",10,"#2196f3",30,"#3f51b5"],"circle-radius":["step",["get","point_count"],15,10,20,30,25]}}),r.addLayer({id:"cluster-count",type:"symbol",source:a,filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),r.addLayer({id:"unclustered-point",type:"circle",source:a,filter:["!",["has","point_count"]],paint:{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}}),r.on("click","clusters",(e=>{const o=r.queryRenderedFeatures(e.point,{layers:["clusters"]}),t=o[0].properties.cluster_id;r.getSource(a).getClusterExpansionZoom(t,((e,t)=>{e||r.easeTo({center:o[0].geometry.coordinates,zoom:t})}))})),r.on("click","unclustered-point",(e=>{const o=e.features[0].geometry.coordinates.slice(),{popupMarkup:t}=e.features[0].properties;for(;Math.abs(e.lngLat.lng-o[0])>180;)o[0]+=e.lngLat.lng>o[0]?360:-360;new mapboxgl.Popup({offset:25,className:"mapbox-popup"}).setLngLat(o).setHTML(t).addTo(r)})),r.on("mouseenter","clusters",(()=>{r.getCanvas().style.cursor="pointer"})),r.on("mouseleave","clusters",(()=>{r.getCanvas().style.cursor=""}))}))},a=document.querySelectorAll(".needs-validation"),r=document.querySelector(".starability"),c=document.querySelector(".file-input-index"),s=document.querySelector("#campgroundMap"),n=document.querySelector("#clusterMap");var l;if(a&&(l=a,Array.from(l).forEach((e=>{e.addEventListener("submit",(o=>{e.checkValidity()||(o.preventDefault(),o.stopPropagation()),e.classList.add("was-validated")}),!1)}))),r&&(()=>{const e=Array.from(document.querySelectorAll("fieldset input")),o=document.querySelector("input[type=hidden]");e.forEach((e=>{e.addEventListener("click",(t=>{const{category:a}=e.dataset;console.log(a),o.value=a}))}))})(),c&&c.addEventListener("change",(e=>{const o=[],t=e.target.files;Array.from(t).forEach((e=>{o.push(URL.createObjectURL(e))}));const a=document.querySelector(".images-container-index");a&&(a.innerHTML="",o.forEach((e=>{const o=`<div class="col-sm-6 col-md-3 gx-4"><div class="card"><img src="${e}" alt="preview Image"></div></div>`;a.insertAdjacentHTML("afterbegin",o)})))})),s){o(JSON.parse(s.dataset.campground))}if(n){t(JSON.parse(n.dataset.campgrounds))}})();